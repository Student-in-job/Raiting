@using PagedList.Mvc;
@model PagedList.IPagedList<RatingUniversity.Models.Jadval5>
	<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

	@{
		Layout = "~/Views/Shared/_LayoutSideMenuEdit.cshtml";
		int count = 1;
	}


	@if ((ViewBag.status == null || ViewBag.status == 0) && ViewBag.status_date == 0 && ViewBag.role != 1)
	{
		<a href="/Jadval5/Download">@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.DownloadTemplate, ViewBag.lang, ViewBag.alfabet)</a>
        <h3>@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.AttachFile, ViewBag.lang, ViewBag.alfabet)</h3>

		using (Html.BeginForm("Upload", "Jadval5", FormMethod.Post, new { enctype = "multipart/form-data" }))
		{
			<input type="file" name="files" />
	<input type="submit" name="Submit" id="Submit" value="@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.Upload, ViewBag.lang, ViewBag.alfabet)" />
		}
	}
@if ((ViewBag.status == null || ViewBag.status == 0) && ViewBag.status_date == 1)
{
	<h5>@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.DTM_vremya_istek, ViewBag.lang, ViewBag.alfabet)</h5>
}
@if (ViewBag.status == 1)
{
	<h5>@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.DTM_danniye_podtverjdeni, ViewBag.lang, ViewBag.alfabet)</h5>
}
@if (ViewBag.status == 0)
{
	<h5>@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.DTM_danniye_ne_podtverjdeni, ViewBag.lang, ViewBag.alfabet)</h5>
}
@if (ViewBag.status == 0 && ViewBag.role == 1)
{
	<a href="/Jadval5/Tasdiqlash/@ViewBag.UniverId">@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.DTM_podtverjdat, ViewBag.lang, ViewBag.alfabet)</a>
}
						   	<h3 class="text-center font-bold">@RatingUniversity.Classes.Functions.Translate(ViewBag.university, ViewBag.lang, ViewBag.alfabet)</h3>
						   <h4 class="text-center font-bold">@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_Zagolovok, ViewBag.lang, ViewBag.alfabet)</h4>

	@if (ViewBag.bor == true)
	{
	<table class="table table-bordered">
		<tr class="txtcenter">
			<th>№</th>
			@if (ViewBag.status == 0 && ViewBag.role == 1)
			{
				<th>Статус</th>
			}
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_Fish, ViewBag.lang, ViewBag.alfabet)
			</th>
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_davlat, ViewBag.lang, ViewBag.alfabet)
			</th>
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_mutaxassislik, ViewBag.lang, ViewBag.alfabet)
			</th>
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_dars_beradigan_fan, ViewBag.lang, ViewBag.alfabet)
			</th>
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_asos, ViewBag.lang, ViewBag.alfabet)
			</th>
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T5_fayl, ViewBag.lang, ViewBag.alfabet)
			</th>
			<th>
				@RatingUniversity.Classes.Functions.Translate(RatingUniversity.Langs.Resource.T1_God, ViewBag.lang, ViewBag.alfabet)
			</th>
		</tr>

		@foreach (var item in Model)
		{
			<tr @(item.Status == 1 ? "" : "class=danger")>
				<td>@count</td>@{count++;}
				@if (ViewBag.status == 0 && ViewBag.role == 1)
				{
					<td>
						@if (item.Status == 1)
						{
							<a href="/Jadval5/Status/@item.Id">Не принимать</a>
						}
						else
						{
							<a href="/Jadval5/Status/@item.Id">Принимать</a>

						}
					</td>
				}
				<td>
					@Html.DisplayFor(modelItem => item.FullName)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Davlat_ishjoy)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Speciality)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Subject)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Asos)
				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Asos_fayl)
					<br />
					@using (Html.BeginForm("UploadData", "Jadval5", FormMethod.Post, new { enctype = "multipart/form-data" }))
					{
						<input type="file" name="files" />
						<input type="hidden" name="id" value="@Html.DisplayFor(modelItem => item.Id)" />
						<input type="submit" name="Submit" id="Submit" value="Прикрепить" />
					}

				</td>
				<td>
					@Html.DisplayFor(modelItem => item.Year)
				</td>
			</tr>
		}

	</table>
@Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
	}
